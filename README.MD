#  DnD Tool â€“ Webbasiertes Spielleiter-Tool

Dies ist die frÃ¼he Ausarbeitung eines webbasierten Spielleiter-Tools zur Verwaltung und Erschaffung 
einer lebendigen DnD-Spielwelt.  
Der Prototyp dieses Werkes ward ursprÃ¼nglich unter [DnD-WebUI](https://github.com/ElodinderBarde/DnD-WebUI) geboren und wird nun
als **eigenstÃ¤ndige Spring Boot Applikation** weitergefÃ¼hrt, um sich von XAMPP zu lÃ¶sen und 
ein modular aufgebautes Backend zu etablieren. Zudem soll diese im SpÃ¤teren Verlauf eine 
Mulktiuserapplikation werden, mit eigenem Zugang und Db damit diese nicht mehr Lokal laufen muss.

---

##  ProjektÃ¼bersicht

Das Tool unterstÃ¼tzt die digitale Verwaltung einer lebendigen DnD-Spielwelt:  
Charaktere (NPCs/Spieler), Shops, Items, Clans, Quests, Rufsysteme u.v.m.  
Der Fokus liegt auf **Wartbarkeit**, **ModularitÃ¤t** und klar dokumentierten Schnittstellen.

---

## Im Rahmen des Moduls 295 wird die Seite Shops in den Fokus gelegt

### Anforderungsanalyse

Im rahmen dieser Anforderungsanalayse werden die Erwartungen an das DnD_Tool Backend erfasst. 
Die Anforderungen orientieren sich an den typischen Aufgaben Nutzer:innen in Form von User Stories, einem Use-case_Diagramm sowie konkreten funktionalen Anforderungen dokumentiert. 
Ziel ist es, die zentralen Interaktionen mit dem System nachvollziehbar und  technisch umsetzbar zu beschreiben



### User Stories

- **User Story 1**: [Shop erstellen ](https://github.com/ElodinderBarde/dnd_tool/issues/1)
- **User Story 2**: [Shop Item darstellen](https://github.com/ElodinderBarde/dnd_tool/issues/2)
- **User Story 3**: [Item hinzufÃ¼gen oder lÃ¶schen](https://github.com/ElodinderBarde/dnd_tool/issues/3)




### Use Case

Das UseCase Diagramm zeigt die Interaktion mit der Datenbank. Im ersten schritt sollten Ã¼ber 
die Itempage items ersteellt werden, die im anschluss einem erstellten Shop hinzugefÃ¼gt werden. 
Hier soll ebenso dargestellt werden, dass dies unabhÃ¤ngig voneinander funktioniert. 



![Use Case Diagramm](Dokumente/Bilder/Dokumente/UseCaseDiagramm.png)


### Kernaufgaben
Die nachfolgende Liste dokumentiert die zentralen funktionalen Anforderungen der ShopSeite und ShopDetailSeite. Diese Anforderungen definieren, welche konkreten FÃ¤higkeiten das System bieten muss, um die in den User Stories beschriebenen AnwendungsfÃ¤lle abzudecken.

| ID | Funktionale Anforderungen                                                                     |
| :-: |:----------------------------------------------------------------------------------------------|
| F1 | Die Anwendung soll es ermÃ¶glichen,ein GeschÃ¤ft zu erstellen und diesen an einen Ort zu binden |
| F2 | Die Anwendung soll alle gespeicherten GeschÃ¤fte darstellen kÃ¶nnen.                            |
| F3 | Die Anwendung soll es erlauben, GeschÃ¤fte nach ortschaftund Typ zu filtern                    |
| F4 | Die Anwendung soll einzelne GeschÃ¤fte anhand ihrer ID abrufen.                                |
| F5 | Die Anwendung soll es ermÃ¶glichen, ein bestehendes GeschÃ¤ft zu bearbeiten.   (Notizen, Items) |
| F6 | Die Anwendung soll es ermÃ¶glichen, ein Item, welches an eine ID geknÃ¼pft wurde zu lÃ¶schen.    |
| F7 | Die Anwendung soll anhand der Presets oder einzeln Items hinzufÃ¼gen kÃ¶nnen.                   |
| F8 | Die REST-API soll im JSON-Format kommunizieren.                                               |




### Klassendiagramm

Aufgrund der KomplexitÃ¤t und Verwebung der Klassen in der Gesammten Anwendung, 
verwende ich hier nebst der ZugehÃ¶rigen klassen ein vereinfachtes Relationsmodell der Klassen,
damit viele Redundanzen verhindert werden kÃ¶nnen. 




Im untenstehenden Klassendiagram, sind neun Gruppen dargelegt.

|    Klasse    | Kurzbeschrieb der Klasse in relastion zur DB Tabelle                                                                                                                                |
|:------------:|:------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|     City     | Alle hinterlegten StÃ¤dte werden in dieser Tabellenklasse hinterlegt. diese werden in Zukunft auf der WorldPage beasrbeitbar sein                                                    |
|   Village    | Alle hinterlegten DÃ¶rfer werden in dieser Tabellenklasse hinterlegt. diese werden in Zukunft auf der WorldPage beasrbeitbar sein                                                    |
|   Location   | Diese Klasse ist eine Zwischentabelle, die die Location als LocationID aus CityId und VillageID zusammenfÃ¤sst.                                                                      |
|   ShopType   | Eine Zwischentabelle die die Typen der GeschÃ¤fte zusammenfÃ¤sst, diese soll erweiterbar sein, wurde jedoch noch nicht implementiert.                                                 |
|     Shop     | Diese Tabellenklasse ist der Mittelpunkt der Seite. auf dieser Tabelle werden die Namen, des Typs, der Ortschaft und die Notizen gespeichert                                        |
|   ShopItem   | Eine Zwischentabellenklasse, die die auf den Shop hinterlegte Items zusammenfÃ¤sst. hier kÃ¶nnte auch ein Spezialpreeis hinterlegt werden, wurde jedoch noch nicht implementiert.     |
|     Item     | Eine Tabellenklasse die der Mittelpunkt der ItemPage ist. auf dieser Liste werden alle Items hinterlegt, sowie preise, seltenheiten ressource und weitere Informationen hinterlegt. | 
| ShopRelation | Eine Zwisachentabellenklasse die die Relation von NPC zu GeschÃ¤ften speichert.                                                                                                      |
| ShopEmployee | Eine Tabellenklasse, die verschiedene Anstellungspositionen sammelt.                                                                                                                |
| ShopCustomer | Eine Tabellenklasse, die verschiedene Kundenpositionen sammelt.                                                                                                                     |



![Klassendiagramm](/Dokumente/Bilder/Dokumente/Klassendiagramm1.png)


Zur besseren Lesbarkeit wurden alle AbhÃ¤ngigkeiten als Â«usesÂ»-Beziehungen gekennzeichnet. 
Die Pfeile geben jeweils an, welche Klasse eine andere verwendet.
Das Diagramm bietet damit eine Ã¼bersichtliche Darstellung der Klassenstruktur und erleichtert 
das VerstÃ¤ndnis fÃ¼r den Aufbau und die Verantwortlichkeiten innerhalb der Anwendung.
![Klassendiagramm](/Dokumente/Bilder/Dokumente/classDiagrammVereinfacht.png)




## REST-Schnittstellen
Die entwickelte Applikation stellt eine REST-API zur VerfÃ¼gung,
Ã¼ber die alle relevanten Operationen durchgefÃ¼hrt werden kÃ¶nnen.
Diese Schnittstellen bilden die zentrale Interaktionsebene fÃ¼r das Frontend sowie potenzielle
Drittanwendungen.
Darunter fallen `ShopController`, `ItemController`, `ShopItemController`, `ShopTypeController`, `ShopEmployeeController`
`ShopRelationsController`, `LocationController`, `CityController`, `VillageController` und `ShopCustomerController`

Der Ãœbersicht und Erweitbarkeitswegen wurden diese auf diese Aufgeteilt. Um Redundanzen zu vermeiden lege ich hier den Fokus auf
`ShopController`, `ShopItemController` und `ItemController`

### UnterstÃ¼tzte Endpunkte
|     Controller      | Methode  | Pfad                  | Beschreibung                                                       |
|:-------------------:|:--------:|:----------------------|:-------------------------------------------------------------------|
|   ShopController    |  `GET`   | "/api/shops"          | Gibt alle verfÃ¼gbaren Shops zurÃ¼ck                                 |
|   ShopController    |  `GET`   |"/{id}| Gibt den verfÃ¼gbaren Shop mit der angegeben ID zurÃ¼ck              |
|   ShopController    |  `PUT`   | "/{id}"               | Aktualisiert die Shopnotizen                                       | 
|   ShopController    |  `POST`  |                       | Erlaubt es Ã¼ber den DTO und Serviceklasse Shops zu erstellen       |
|   ShopController    | `Delete` | "/{id}"               | ErmÃ¶glicht das LÃ¶schen eines GeschÃ¤fts                             |
|   ShopController    |  `GET`   | "/{shopId}/employees" | Gibt alle an ShopId gebundenen Mitarbeiter zurÃ¼ck                  |
|   ShopController    |  `GET`   | "/{shopId}/customers" | Gibt alle an ShopId gebundenen Kunden zurÃ¼ck                       |
| ShopItemController  |  `GET`   | "/api/shopItems | Gibt alle Items zurÃ¼ck, die an ein geschÃ¤ft verbunden sind         |
| ShopItemController  | `GET`|"/shop/{ShopId}| gibt alle Items zurÃ¼ck die an den Shop gebunden sind               |
| ShopItemController  | `POST`|"/addItems" | erlaubt es ein Item an einen Shop hinzuzufÃ¼gen                     |
| ShopItemCOnttroller |`PUT`|"/{shopItemId}/quantity| erlaubt es die hinterlegte Itemmenge anzupassen                    |
|   ItemController    |`GET`| "/api/items"| Gibt alle hitnerlegten Items zurÃ¼ck                                |
|   ItemController    | `GET`| "/resources" | GIbt alle hinterlegten Ressourcen zurÃ¼ck                           |
|   ItemController    | `POST`|| Erlaubt es Ã¼ber den DTO un der Serviceklasse ein Item zu erstellen |


- **CORS-Konfiguration**: Um Cross-Origin-Anfragen vom Frontend (z.â€¯B. `http://localhost:5173`) 
- zu ermÃ¶glichen, wurde die API gezielt fÃ¼r bestimmte UrsprÃ¼nge freigegeben. Dies geschieht in der 
- `WebConfig`-Klasse, welche `WebMvcConfigurer` implementiert und die Methode `addCorsMappings()` 
- Ã¼berschreibt, um gezielt Pfade freizuschalten.



## Beispiel fÃ¼r eine Anfrage
>**POST**: `/addItems`

Erstellt eine neue verbindung zwischen einem Item und einem GeschÃ¤ft basierend auf den Ã¼bergebenen Daten.

Die Anfrage erwartet ein JSON-Objekt basierend auf dem `ShopItemDTO`.

**Request-Body (JSON)**:
```json
{
  "ShopItemID": 55,
  "shopId": 25,
  "ItemID": 5,
  "quantity": 5,
  "Item":   {
    "id": 5,
    "name": "Weinfasche",
    "price": 15,
    "typ": "Lebensmittel",
    "seltenheit": "Common",
    "buch": "Eigene",
    "seite1": null,
    "seite2": null,
    "seite3": null,
    "einstimmung": "N",
    "beschreibung": null
  }
}
```

##  Features (Geplant / In Umsetzung)

- **NPC-Verwaltung**: Erstellen, Generieren, Bearbeiten, Notizen speichern
- **Shops**: Verwaltung von HÃ¤ndlern & Sortiment
- **Items**: Erstellen und Ressourcen zuweisen
- **Ortschaften**: Anlegen und verwalten
- **Monster**: Bestien erzeugen und verwalten
- **Clans**: Soziale Strukturen mit Rufsystem
- **Spieler**: Erfassen & verwalten
- **Quests**: Anlegen, Zuordnen und Verfolgen
- **Rufsystem**: Beziehungen zwischen Spielern, Clans und NPCs

---

##  Tech Stack

| Ebene      | Technologie                  |
|------------|------------------------------|
| **Backend** | Java 21, Spring Boot 3.x, Maven |
| **Datenbank** | MySQL (via JDBC, spÃ¤ter evtl. JPA) |
| **Frontend** | React, Vite, Tailwind CSS (optional) |
| **API**     | RESTful, JSON |

---

## Projektstruktur

```plaintext
dnd_tool/
â”œâ”€â”€ backend/       # Spring Boot REST-API
  â””â”€â”€ database      # SqlDatei fÃ¼r Grund-Datenbank
  â””â”€â”€ src
    â””â”€â”€ main
      â””â”€â”€ java
        â””â”€â”€ ch.Elodin.DnD_Tool
          â”œâ”€â”€ config
          â”œâ”€â”€ controller
          â”œâ”€â”€ dto
          â”œâ”€â”€ mapper
          â”œâ”€â”€ model
          â”œâ”€â”€ repository
          â”œâ”€â”€ service
        â””â”€â”€DnDToolApplication.java   #MainDatei
          
â”œâ”€â”€ frontend/      # Vite + React BenutzeroberflÃ¤che
  â”œâ”€â”€src
    â”œâ”€â”€ assets
    â”œâ”€â”€ components          #komponenten
      â”œâ”€â”€ components_css
      â”œâ”€â”€ createNpc
      â”œâ”€â”€ items
      â”œâ”€â”€ npc-detail-page
      â”œâ”€â”€ npcBoard
      â”œâ”€â”€ questboard
      â”œâ”€â”€ shop-details
      â”œâ”€â”€ shops
    â””â”€â”€ navbar.jsx          # Navbarkomponente 

  â”œâ”€â”€ pages
  â”œâ”€â”€ service

â””â”€â”€ install.bat
â””â”€â”€ README.md
â””â”€â”€ run.bat

```

## Lokale Einrichtung (Entwicklung)
Voraussetzungen
Java 21 (Temurin empfohlen)

Node.js (v18+)

MySQL-Datenbank

Maven



## Installation
```
PrÃ¼fen ob Java 21 Installiert ist
PrÃ¼fen ob Node.js Installiert ist
PrÃ¼fen ob Maven installiert ist
PrÃ¼fen ob MySql Server installiert ist und aktiv ist


install.bat ausfÃ¼hren

root Benutzername eintragen
root Passwort eintragen //Achtung, Passwort wird im klartext dargestellt!

nun wird die benÃ¶tigte db erstellt und User angelegt

bei erfolgreichem Import wird run.bat ausgefÃ¼hrt

Wenn Spring Boot Server erfolgreich gestartet wurde:
Ã¶ffne einen beliebigen Browser und besuche die Adresse : localhost:5173


```


Backend starten

run.bat ausfÃ¼hren oder 


```bash

cd backend
./mvnw spring-boot:run
# LÃ¤uft auf: http://localhost:8081

```


Frontend starten

```bash
cd frontend
npm install
npm run dev
# LÃ¤uft auf: http://localhost:5173
``` 


API Proxy (in vite.config.js)

```js
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8081',
      changeOrigin: true,
      rewrite: path => path.replace(/^\/api/, '')
    }
  }
}
```











ğŸš§ Entwicklungsstand
âš ï¸ Dieses Projekt befindet sich in einem frÃ¼hen Stadium.
Die Architektur wird fortlaufend modularisiert, das Datenmodell verfeinert und eine vollstÃ¤ndige API aufgebaut.

ğŸ‘¤ Autor
Elodin, Webzauberer & Spielleiter aus der Schweiz
GitHub: ElodinderBarde

ğŸ§¾ Lizenz
Lizenzierung folgt im weiteren Verlauf der Entwicklung.
Aktuell private Nutzung. Kein Ã¶ffentlicher Rollout vorgesehen.


## ğŸ“š Rechtlicher Hinweis

Dieses Tool verwendet Teile der **Dungeons & Dragons 5e System Reference Document (SRD 5.1)**, verÃ¶ffentlicht von **Wizards of the Coast** unter der **Creative Commons Attribution 4.0 International License (CC-BY-4.0)**.

[Link zur SRD 5.1](https://dnd.wizards.com/resources/systems-reference-document)

Alle Rechte an Dungeons & Dragons, den zugehÃ¶rigen Namen, Marken, Welten und Charakteren verbleiben bei Wizards of the Coast.  
Dieses Projekt ist ein **inoffizielles Fanprojekt** und steht in **keiner offiziellen Verbindung** zu Wizards of the Coast.


ğŸŒ± Zukunftsideen (Vision)
Nutzerverwaltung & Sessions

Export/Import von Welten & NPCs

Admin-Dashboard fÃ¼r Live-Spielleitung

Mobile-optimierte Companion-Ansicht fÃ¼r Spieler

